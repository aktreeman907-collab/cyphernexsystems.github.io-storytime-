<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StoryTime â€” Instant AI Bedtime Stories</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        /* Vital: Transparent background so the canvas behind (z-index: -1) is visible */
        background-color: transparent;
        overflow-x: hidden;
      }
      
      #root {
        position: relative;
        z-index: 10; /* Ensure app content sits well above the stars */
      }

      /* The canvas holds the galaxy */
      #galaxy-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background-color: #020305; /* Deep black base */
      }

      /* Custom scrollbar */
      textarea::-webkit-scrollbar {
        width: 8px;
      }
      textarea::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
      }
      textarea::-webkit-scrollbar-thumb {
        background: rgba(255, 209, 64, 0.3);
        border-radius: 4px;
      }
      textarea::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 209, 64, 0.5);
      }
    </style>
<script type="importmap">
{
  "imports": {
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.555.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
</script>
</head>
<body>
    <canvas id="galaxy-canvas"></canvas>
    <div id="root"></div>

    <script>
      /**
       * High-Fidelity Cinematic Galaxy Generator
       */
      const canvas = document.getElementById('galaxy-canvas');
      const ctx = canvas.getContext('2d');

      let w, h;
      
      const resize = () => {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        renderScene();
      };

      window.addEventListener('resize', resize);

      function randomNormal(mean, stdDev) {
        let u = 0, v = 0;
        while(u === 0) u = Math.random(); 
        while(v === 0) v = Math.random();
        return mean + stdDev * Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
      }

      function renderScene() {
        // 1. Fill Deep Space Background
        const bg = ctx.createRadialGradient(w/2, h/2, h*0.2, w/2, h/2, h*1.5);
        bg.addColorStop(0, '#1a103c'); // Deep purple center undertone
        bg.addColorStop(0.4, '#050710');
        bg.addColorStop(1, '#000000');
        ctx.fillStyle = bg;
        ctx.fillRect(0, 0, w, h);

        const cx = w / 2;
        const cy = h / 2;
        const maxDist = Math.max(w, h);

        // 2. Generate Dense Spiral Galaxy
        // We use 'lighter' composite mode to make overlapping stars glow brightly like a real photo
        ctx.globalCompositeOperation = 'lighter';

        const particleCount = 4500;
        const arms = 2; // Two main arms like the reference
        const armTwist = 3.5; // How many times it wraps
        
        for (let i = 0; i < particleCount; i++) {
            // Normalized distance (0 to 1)
            // Biased towards center for bright core
            let distNorm = Math.pow(Math.random(), 1.5); 
            
            // Actual distance from center
            const dist = distNorm * (Math.min(w, h) * 0.65);

            // Angle: spiral equation + which arm + random scatter
            // Spiral equation: angle increases with distance
            const spiralAngle = distNorm * Math.PI * armTwist;
            const armOffset = (Math.floor(Math.random() * arms) / arms) * (Math.PI * 2);
            const scatter = randomNormal(0, 0.4); // Scatter stars around the "spine" of the arm

            const angle = spiralAngle + armOffset + scatter;

            const x = cx + Math.cos(angle) * dist;
            const y = cy + Math.sin(angle) * dist;

            // Coloring based on Reference Image
            // Center: Hot White -> Yellow
            // Mid Spiral: Pink/Magenta -> Violet
            // Outer: Blue -> Cyan -> Fade
            let r, g, b, a, size;

            if (distNorm < 0.15) {
                // Bright Core
                r = 255; g = 250; b = 220; 
                a = 0.8 + Math.random() * 0.2;
                size = Math.random() * 3 + 1; 
            } else if (distNorm < 0.5) {
                // Inner Arms (Pink/Magenta/Purple zones)
                // Mix between hot pink and deep violet
                if (Math.random() > 0.5) {
                   r = 255; g = 50; b = 150; // Hot Pink
                } else {
                   r = 140; g = 50; b = 250; // Violet
                }
                a = 0.5;
                size = Math.random() * 2.5;
            } else {
                // Outer Arms (Blue/Cyan/Indigo)
                r = 50; g = 150; b = 255;
                a = 0.4;
                size = Math.random() * 2;
            }

            // Draw particle
            ctx.fillStyle = `rgba(${r}, ${g}, ${b}, ${a})`;
            ctx.beginPath();
            ctx.arc(x, y, size, 0, Math.PI * 2);
            ctx.fill();
        }

        // 3. Add "Hero Stars" (Bright foreground stars with lens flare hint)
        ctx.globalCompositeOperation = 'source-over';
        for(let i=0; i < 75; i++) {
            const x = Math.random() * w;
            const y = Math.random() * h;
            const size = Math.random() * 1.5 + 0.5;
            
            // Glow
            ctx.shadowBlur = 10;
            ctx.shadowColor = "white";
            ctx.fillStyle = "white";
            ctx.beginPath();
            ctx.arc(x, y, size, 0, Math.PI * 2);
            ctx.fill();
            
            // Cross flare for biggest stars
            if (Math.random() > 0.9) {
               ctx.strokeStyle = "rgba(255,255,255,0.4)";
               ctx.lineWidth = 0.5;
               ctx.beginPath();
               ctx.moveTo(x - 5, y);
               ctx.lineTo(x + 5, y);
               ctx.moveTo(x, y - 5);
               ctx.lineTo(x, y + 5);
               ctx.stroke();
            }
        }
        ctx.shadowBlur = 0; // Reset

        // 4. Subtle "Nebula Clouds" overlay
        // Uses very large, low-opacity gradients to tint areas
        ctx.globalCompositeOperation = 'screen';
        
        // A big splash of blue nebula on the left
        const nebula1 = ctx.createRadialGradient(w*0.2, h*0.8, 0, w*0.2, h*0.8, w*0.4);
        nebula1.addColorStop(0, 'rgba(0, 100, 255, 0.1)');
        nebula1.addColorStop(1, 'transparent');
        ctx.fillStyle = nebula1;
        ctx.fillRect(0,0,w,h);

        // A splash of pink/purple nebula on the right
        const nebula2 = ctx.createRadialGradient(w*0.8, h*0.2, 0, w*0.8, h*0.2, w*0.4);
        nebula2.addColorStop(0, 'rgba(255, 0, 100, 0.1)');
        nebula2.addColorStop(1, 'transparent');
        ctx.fillStyle = nebula2;
        ctx.fillRect(0,0,w,h);
      }

      // Start
      resize();
    </script>
</body>
</html>